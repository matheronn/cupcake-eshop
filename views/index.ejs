<%- include('layouts/main', { title: 'Início' }) %>

<!-- Hero Section -->
<section class="hero bg-gradient-pink text-white py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">
                    Cupcakes Irresistíveis!
                </h1>
                <p class="lead mb-4">
                    Descubra nossa coleção de cupcakes artesanais, feitos com ingredientes premium e muito amor. 
                    Cada mordida é uma explosão de sabor!
                </p>
                <div class="d-flex gap-3">
                    <a href="/products" class="btn btn-warning btn-lg">
                        <i class="bi bi-eye"></i> Ver Catálogo
                    </a>
                    <% if (!user) { %>
                        <a href="/auth/register" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-person-plus"></i> Cadastrar
                        </a>
                    <% } %>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <img src="/images/hero-cupcake.jpg" alt="Cupcakes Deliciosos" class="img-fluid rounded-3 shadow-lg"
                     style="max-height: 400px; object-fit: cover;">
            </div>
        </div>
    </div>
</section>

<!-- Produtos em Destaque -->
<section class="py-5">
    <div class="container">
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="fw-bold mb-3">Nossos Mais Pedidos</h2>
                <p class="text-muted">Experimente os sabores que conquistaram nossos clientes</p>
            </div>
        </div>
        
        <div class="row g-4">
            <% if (products && products.length > 0) { %>
                <% products.forEach(product => { %>
                    <div class="col-md-6 col-lg-3">
                        <div class="card product-card h-100 shadow-sm">
                            <img src="<%= product.imagem_url || '/images/cupcake-default.jpg' %>" 
                                 class="card-img-top" alt="<%= product.nome %>"
                                 style="height: 200px; object-fit: cover;">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title"><%= product.nome %></h5>
                                <p class="card-text text-muted flex-grow-1">
                                    <%= product.descricao %>
                                </p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="h5 text-success mb-0">
                                        R$ <%= parseFloat(product.preco).toFixed(2).replace('.', ',') %>
                                    </span>
                                    <% if (user) { %>
                                        <!-- <button class="btn btn-pink btn-sm" onclick="addToCart(<%= product.id %>)">
                                            <i class="bi bi-cart-plus"></i>
                                        </button> -->
                                    <% } else { %>
                                        <a href="/auth/login" class="btn btn-pink btn-sm">
                                            <i class="bi bi-cart-plus"></i>
                                        </a>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <!-- Produtos temporários para demonstração -->
                <div class="col-md-6 col-lg-3">
                    <div class="card product-card h-100 shadow-sm">
                        <img src="/images/cupcake-chocolate.jpg" class="card-img-top" alt="Cupcake de Chocolate"
                             style="height: 200px; object-fit: cover;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Chocolate Supremo</h5>
                            <p class="card-text text-muted flex-grow-1">
                                Cupcake de chocolate com cobertura cremosa e raspas de chocolate belga.
                            </p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="h5 text-success mb-0">R$ 8,50</span>
                                <% if (user) { %>
                                    <button class="btn btn-pink btn-sm">
                                        <i class="bi bi-cart-plus"></i>
                                    </button>
                                <% } else { %>
                                    <a href="/auth/login" class="btn btn-pink btn-sm">
                                        <i class="bi bi-cart-plus"></i>
                                    </a>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3">
                    <div class="card product-card h-100 shadow-sm">
                        <img src="/images/cupcake-morango.jpg" class="card-img-top" alt="Cupcake de Morango"
                             style="height: 200px; object-fit: cover;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Morango Fresh</h5>
                            <p class="card-text text-muted flex-grow-1">
                                Massa de baunilha com recheio de morango e cobertura de cream cheese.
                            </p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="h5 text-success mb-0">R$ 9,00</span>
                                <% if (user) { %>
                                    <button class="btn btn-pink btn-sm">
                                        <i class="bi bi-cart-plus"></i>
                                    </button>
                                <% } else { %>
                                    <a href="/auth/login" class="btn btn-pink btn-sm">
                                        <i class="bi bi-cart-plus"></i>
                                    </a>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3">
                    <div class="card product-card h-100 shadow-sm">
                        <img src="/images/cupcake-red-velvet.jpg" class="card-img-top" alt="Red Velvet"
                             style="height: 200px; object-fit: cover;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Red Velvet Clássico</h5>
                            <p class="card-text text-muted flex-grow-1">
                                O tradicional red velvet com cobertura de cream cheese e nozes.
                            </p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="h5 text-success mb-0">R$ 10,50</span>
                                <% if (user) { %>
                                    <button class="btn btn-pink btn-sm">
                                        <i class="bi bi-cart-plus"></i>
                                    </button>
                                <% } else { %>
                                    <a href="/auth/login" class="btn btn-pink btn-sm">
                                        <i class="bi bi-cart-plus"></i>
                                    </a>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3">
                    <div class="card product-card h-100 shadow-sm">
                        <img src="/images/cupcake-limao.jpg" class="card-img-top" alt="Cupcake de Limão"
                             style="height: 200px; object-fit: cover;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Limão Siciliano</h5>
                            <p class="card-text text-muted flex-grow-1">
                                Refrescante cupcake de limão com cobertura cítrica e raspas de limão.
                            </p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="h5 text-success mb-0">R$ 8,00</span>
                                <% if (user) { %>
                                    <button class="btn btn-pink btn-sm">
                                        <i class="bi bi-cart-plus"></i>
                                    </button>
                                <% } else { %>
                                    <a href="/auth/login" class="btn btn-pink btn-sm">
                                        <i class="bi bi-cart-plus"></i>
                                    </a>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
            <% } %>
        </div>
        
        <div class="text-center mt-5">
            <a href="/products" class="btn btn-outline-pink btn-lg">
                Ver Todos os Produtos <i class="bi bi-arrow-right"></i>
            </a>
        </div>
    </div>
</section>

<section class="bg-light py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-4 text-center">
                <div class="feature-box">
                    <i class="bi bi-truck fs-1 text-pink mb-3"></i>
                    <h4>Entrega Rápida</h4>
                    <p class="text-muted">Receba seus cupcakes frescos em até 2 horas na região metropolitana.</p>
                </div>
            </div>
            <div class="col-md-4 text-center">
                <div class="feature-box">
                    <i class="bi bi-shield-check fs-1 text-pink mb-3"></i>
                    <h4>Ingredientes Premium</h4>
                    <p class="text-muted">Utilizamos apenas ingredientes selecionados e de alta qualidade.</p>
                </div>
            </div>
            <div class="col-md-4 text-center">
                <div class="feature-box">
                    <i class="bi bi-heart fs-1 text-pink mb-3"></i>
                    <h4>Feito com Amor</h4>
                    <p class="text-muted">Cada cupcake é preparado artesanalmente com muito carinho e dedicação.</p>
                </div>
            </div>
        </div>
    </div>
</section>